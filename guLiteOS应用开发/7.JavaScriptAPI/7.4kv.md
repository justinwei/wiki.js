# 一、参数以及api描述

### API 介绍

#### kv.createKV(options)

初始化一个kv数据库的函数，并始终返回一个 curr_kv对象，参数为 options。

- options：打开kv数据库的参数，包括path、name、mode。

  - path：当mode为0时代表flash分区名，mode为1时代表文件路径
  - name：数据库文件名
  - mode：为0代表flash模式，为1代表文件模式

  注：在文件模式下，数据库文件的完整路径为: **path/name**

#### curr_kv方法

**1、curr_kv.setItem(key, value)**

设置kv，会覆盖相同的key

- key ：string类型。
- value：string类型。
- 返回值：0代表成功，-1代表失败。

**2、curr_kv.getItem(key)**
获取val

- key ：string类型。
- 返回值：string代表查询成功，为null代表失败。

**3、curr_kv.removeItem(key)**
删除kv

- key ：string类型。
- 返回值：0代表成功，为-1代表失败（删除不存在的key也返回0）。

**4、curr_kv.removeAll()**
删除全部kv

- 返回值：0代表成功，为-1代表失败。

**5、curr_kv.sync()**

同步kv到磁盘

- 返回值：0代表成功，为-1代表失败。

**6、curr_kv.deinit()**

销毁curr_kv对象

- 返回值：0代表成功，为-1代表失败。

### 例子

```js
var kv = require('kv');

var options = {
	path : "kv_info",
	name : "env",
	mode : 0,  //1:文件模式 0:flash模式
}

var options1 = {
	path : "lfs/kv",
	name : "env1",
	mode : 1,  //1:文件模式 0:FAL模式
}

var curr_kv = kv.createKV(options);
var curr_kv1 = kv.createKV(options1);

var ret = curr_kv.setItem('set_test1', '111this is set itme');
console.log("set ret = ", ret);

ret =  curr_kv.getItem('set_test1');
console.log("get ret = ", ret);

ret =  curr_kv.setItem('set_test2', '222this is set itme');
console.log("set ret = ", ret);

ret =  curr_kv.getItem('set_test2');
console.log("get ret = ", ret);

ret =  curr_kv.sync();
console.log("sync ret = ", ret);

ret =  curr_kv.removeItem('set_test2');
console.log("removeItem ret = ", ret);

ret =  curr_kv.sync();
console.log("sync ret = ", ret);

ret =  curr_kv.removeItem('set_test2');
console.log("removeItem ret = ", ret);

ret =  curr_kv.removeAll();
console.log("removeAll ret = ", ret);

ret =  curr_kv.sync();
console.log("sync ret = ", ret);
//关闭数据库记得调用deinit
ret =  curr_kv.deinit();
ret =  curr_kv1.deinit();
```