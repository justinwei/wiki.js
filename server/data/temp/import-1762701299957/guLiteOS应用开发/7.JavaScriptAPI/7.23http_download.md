### 一、模块介绍

创建一个http下载文件的请求，通过输入url和文件路径，实现文件下载

### 二、API

#### 1、http.download(option)

发起下载请求，返回一个对象

```
option: {
    url: "https://lmg.jj20.com/up/allimg/tp05/1910021PK15029-0-lp.jpg",
    path: "fatfs/download/2.jpg",
    //offset为可选参数，不填该参数时如果文件存在，默认以追加的方式写入数据，如果不存在，则创建该文件; 填入该参数时，要求文件必须存在 
    offset: 0, 
    timeout: 3000,
    //header为可选参数
    header:{        

    }
}
```

#### 2、download.abort()

打断当前下载, 打断下载时文件已写入的数据不会擦除

### 三、事件

#### 事件回调的参数

```
option: {
    url: "https://lmg.jj20.com/up/allimg/tp05/1910021PK15029-0-lp.jpg",
    path: "fatfs/download/2.jpg",
    total_size: 1000,       //文件总大小
    cur_size:   900,       //当前已下载大小
    pos:  0,          //写入数据的起始位置
};
```

#### 1、error

发生错误时触发

```
download.on('error', function(err, option) {
    // err = -1 : http网络错误
    // err = -2:  文件操作错误
    // err = -3:  其他错误
})
```

#### 2、start

开始下载时触发

```
download.on('start', function(option))  
```

#### 3、progress

下载过程中触发

```
download.on('progress', function(option))  
```

#### 4、end

下载结束时触发

```
download.on('end', function(option))  
```

### 四、例子

```js
var httpDownload = require('http_download');

var options = {
    url: "https://up.enterdesk.com/edpic_source/7f/db/c0/7fdbc067cb38b6ffb295430ddae8757b.jpg",
    path: "fatfs/download/1.jpg",
    offset: 0,
    timeout: 3000,
},

function error(obj) {
    console.log("-----------error-----------");
    console.log(obj);
}

function start(obj) {
    console.log("-----------start-----------");
    console.log(obj);
}

function progress(obj) {
    console.log("-----------progress-----------");
    console.log(obj);
}

function end(obj) {
    console.log("-----------end-----------");
    console.log(obj);
}


var download1 = httpDownload.download(options);
download1.on('error', error)
download1.on('start', start)
download1.on('progress', progress)
download1.on('end', end);

//8秒后打断下载
setTimeout(function() {
    download1.abort();
    console.log("abort download.");
}, 8000);
```