# 一、api以及参数
### API介绍
#### input. createInput(options)
创建input的函数，并始终返回一个 curr_input对象, 参数是一个对象options，以下是对options常用成员的解释：
* option
    * name: string，表示键盘对应的适配名字
    * powerId: int，表示电源按键值
##### 注意，目前只支持键盘！！！


### curr_input事件
当创建成功后，返回的curr_input对象可通过 on 方法监听多个事件，业务逻辑可在监听的回调函数中完成。以下列举一些常用的事件：
* button
##### 有按键事件时被触发，包含未被监听的所有按键事件，参数为 options, options是一个obj
```
curr_input.on("keyboard", function(options) {
	console.log('result:', options.result, 'witch:', options.witch);
});
```
下面列举支持的 Option对象中的属性值：

    * event: int 按键的事件
        * PRESS_DOWN = 0
        * PRESS_UP = 1,
        * PRESS_HOLD = 2,
        * PRESS_REPEAT = 3,
        * LONG_PRESS = 4,
        * SHORT_CLICK = 5,
        * DOUBLE_CLICK = 6,

    * id: int 对应哪一个按键

### curr_input方法
curr_input 除监听事件外，也内置一些方法，用来进行控制输入对象，以下为可使用的方法。
* ```curr_input.destory()```
销毁创建的输入对象

* ```curr_input.ctrl(options)```
控制单签输入对象的成员，例如当前是一个键盘，这可控制键盘的被一个按键的行为，'options'，是一个数组，数组元素是object，一个obj的控制参数，解释如下, 返回值为对应的数组，set表示成功或失败，get表示获取到的值
    * which：int，哪一个成员（在键盘中的意义为按键id）
    * flag：int， 要控制的行为，具体解释
        * 键盘:
            * SHORT_TRIGGER_TIME = 0, 表示短按到双击的时间间隔；注意：小于0表示不要短按事件，大于等于0表示时间间隔，大于其他触发事件的时间时，其他事件会被自动屏蔽
            * LONG_TRIGGER_TIME = 1, 表示按下到触发长按的时间；注意：小于0表示不要长按事件；
            * PRESS_HOLD_TRIGGER_TIME = 2, 表示按下到触发持续按下的时间；注意：小于0表示不要长按事件；
            * PRESS_HOLD_INTEVAL_TIME = 3, 表示持续按下后的时间间隔上报事件；注意：小于0或者比较小的正数不会导致频繁的事件触发，会依据硬件设备的处理能力来决定，建议一般取值大于200ms；
            * ACTIVE_STATE = 4, 表示按下的电平或者标志，取值0-1，一般不需要修改
            * NEED_UP_DOWN = 5, 表示是否需要按下弹起事件，注意：长按时，无论这个flag是啥值，都会触发弹起事件
    * val：int，flah对应的值；
    * action: int, 1表示设置，0表示获取


### 例子
```
var input = require("input");

//name需要与设备保持一直，才能匹配到对应的键盘
var options = {
    name:'keyboard_1',
    powerId: 0x25,
};

var curr_input;
var test_ctrl_id;

function create() {
	console.log("create start");
	curr_input = input.createInput(options);
	var destory_id = setTimeout(destory, 15000);
	curr_input.on("keyboard", function(options) {
		console.log('result:', options.result, 'which:', options.which);
	});
	test_ctrl_id = setInterval(test_ctrl, 2000);
}

//设置0x2E这个按键的长按出发时间为1秒钟
var options_ctrl = [{
    which: 0x2E,
    flag: 3,
    val: 1000,
    action: 1,
},{
    which: 0x20,
    flag: 3,
    val: 1000,
    action: 1,
}];

var cnt = 1;

function test_ctrl() {
	//返回0表示成功，其他表示失败
	options_ctrl[0].val = cnt++ * 100;
	var ret = curr_input.ctrl(options_ctrl);
	console.log("ret = ", ret, options_ctrl[0].which, options_ctrl[0].flag, options_ctrl[0].val, ret.length);
	if (cnt > 10) {
		cnt = 1;
	}
}

//销毁创建的键盘
function destory() {
	clearInterval(test_ctrl_id);
	curr_input.off("keyboard", function() {
		console.log('移除keyboard事件！');
	});
	curr_input.destory();
	setTimeout(create, 2000);
	console.log("destory end");
}

create();


```