# 1. 自定义ui组件创建
组件可以扩展 HTML 元素，封装可重用的代码。
自定义ui组件是一个Class类，实现带界面的操作，包括属性方法和事件。

所有ui对象使用gu提供的ui创建dom的系统方法，包括
* createDom
    创建dom对象
* setDomAttr
    设置dom属性
* setDomStyle
    设置dom样式
* setDomEvent
    设置dom事件
* delDom
    删除dom对象

以下以一个MessageBox例子解释如何开发和使用ui组件

以下代码是ts代码，需要转成ES5
```
class MessageBox{
    parent:any
    title:string
    button_list:string[]
    funcback:any
    div_obj:any

    constructor(parent:any, title:string, button_list:string[], funcback:any){
        this.parent = parent
        this.title = title
        this.button_list = button_list
        this.funcback = funcback
        this.create()
    }
    create()
    {
        div_obj = gu_ui.createDom(this.parent, "div")
        this.div_obj = div_obj
        gu_ui.setDomAttr(div_obj, "size", "250 150")
        gu_ui.setDomAttr(div_obj, "center", "true")
        gu_ui.setDomStyle(div_obj, "bg_color", "#ffffff", '')
        
        var label_obj = gu_ui.createDom(div_obj, "label")
        gu_ui.setDomAttr(label_obj, "pos", "20 20")
        gu_ui.setDomStyle(label_obj, "font", "simsun16", '')
        gu_ui.setDomStyle(label_obj, "color", "#688CA8", '')
        gu_ui.setDomAttr(label_obj, "text", this.title)    
        const button_width = 30
        const button_space = 50
        var curThis = this
        var index:number;
        for(index in this.button_list){
            var btn = gu_ui.createDom(div_obj, "button")  
            console.log(this.title)
            console.log(this.button_list[index])
            gu_ui.setDomEvent(btn, "click", function(btn_name:string, code:number){
                console.log('click button', btn_name, 'code=', code)
                curThis.funcback(btn_name)
            }, this.button_list[index], index)
    
    
            gu_ui.setDomEvent(btn, 'key', function(str:string, key_code:number){
                console.log("str=", str,"key_code=", key_code)
            }, "hello work")
            
            gu_ui.setDomAttr(btn, "pos", (20 + index*(button_width+button_space)) + " 70")
            var lbl = gu_ui.createDom(btn, "label")
            gu_ui.setDomStyle(lbl, "font", "simsun16", '')
            gu_ui.setDomStyle(lbl, "color", "#ffffff", '')        
            gu_ui.setDomAttr(lbl, "text", this.button_list[index])                
        }    
    }
    destory(){
        //销毁所有创建的对象,只要销毁根dom，子dom会自动销毁
        gu_ui.delDom(this.div_obj)
    }
}
```


# 2. 使用自定义ui组件
## 2.1 在页面顶部
第一个参数parent为null，表示在当前窗口创建该messagebox
```
        var messagebox = new MessageBox(null, "are you sure closed this windows", ["yes", "no"], function(btn){
            console.log("btn name=", btn);
            messagebox.destory();
        })
```
## 2.2 嵌入页面
可以将自定义组件放在page页面的某个dom下，
需要使用gu_ui.getDomById方法，根据ID获得页面dom的对象指针
如下例子：
layout.xml
```
<div class="container" scrollbar_mode="MODE_OFF"  >
    <button @click="popmsgbox()"> <label text="pop Messagebox" /></button>
    <button @click="popmsgboxIn()"> <label text="pop Messagebox in follow " /></button>
    <div id="msgboxcont" size="200 200">
    </div>
</div>    

```
script.js
```
var MsgBox = {
    data:{
     
    },
    onload:function(para){
        console.log("load page Msgbox...")
    },
    popmsgbox:function(){
        var messagebox = new MessageBox(null, "are you sure closed this windows", ["yes", "no"], function(btn){
            console.log("btn name=", btn);
            messagebox.destory();
        })
    },
    popmsgboxIn:function(){
        var dom = gu_ui.getDomById("msgboxcont")
        //根据id获取页面对应dom的指针，以这个dom为父对象创建messagebox
        var messagebox = new MessageBox(dom, "are you sure closed this windows", ["yes", "no"], function(btn){
            console.log("btn name=", btn);
            messagebox.destory();
        })        
    }

}
``` 
