### 一、模块介绍

实现wifi的连接、断开的操作，因wifi只有一个，所以建议全局初始化一次，其他页面使用的时候继承全局的

### 二、api

#### 1、wifi.create()

返回一个wifiClient对象，调用此接口会自动初始化wifi

#### 2、wifiClient.connect(option)

手动连接wifi接口

- option: 对象，有下面四个成员
  - is_hidden：是否是隐藏wifi
  - ssid：wifi名称
  - pwd：wifi密码
  - mac_addr：该wifi的mac地址
  - sec_type: wifi加密类型

#### 3、wifiClient.disconnect()

断开当前wifi连接，无返回值，无参数

#### 4、wifiClient.autoConnect()

开启wifi自动扫描，连接

#### 5、wifiClient.getSaveWifiList()

获取当前设备保存的WiFi列表（已连接过）

- 返回值：字符串

#### 5、wifiClient.getScanResult(callback)

获取最新扫描到的wifi列表

- callback：回调函数
  - err：错误码
  - result：字符串

#### 6、wifiClient.getCurConnState()

获取当前连接状态

```
typedef enum {
	WIFI_STAT_CONNECT_TIMEOUT,
	WIFI_STAT_PWD_ERR,
	WIFI_STAT_DISCONN,
	WIFI_STAT_CONNECTING,
	WIFI_STAT_CONNECTED,	//wifi连接成功，不确保该wifi有网络
	WIFI_STAT_WLAN_UP,		//wifi连接成功且该wifi有网络
    WIFI_STAT_CONNECT_FAILED,    //连接失败
}e_wifi_conn_stat_t;
```

#### 7、wifiClient.getCurConnWifi()

当前连接的WiFi信息，返回一个对象, 例：{ssid:"gurobot",mac:"94:29:2f:69:4e:d1",rssi:81}

#### 8、wifiClient.wifiSwitch(opt，callback(err, state))

wifi开关

- opt：开关参数(字符串)
  - 开启："on"
  - 关闭："off"
- callback: 回调函数，err：错误码，state：“on”/“off”状态



### 三、事件

#### 1、conState

当wifi连接状态发生改变时触发

```
wifiClient.on('conState', function event(state) {
    console.log('con state1: ', state);
})
```

### 四、例子

```
var wifi = require('wifi');

var wifiClient = wifi.create();

wifiClient.getScanResult(function (err, result) {
    console.log('scan result err: ', err);
    console.log('scan result: ', result);
})

var con_info = {
    ssid: "gurobot",
    pwd: "76876868",
    mac_addr: "31:31:32:32:33:33",
    is_hidden: 0,
    sec_type: "wpa2_psk"
};

wifiClient.connect(con_info);

wifiClient.on('conState', function event(state) {
    console.log('con state1: ', state);
})
```