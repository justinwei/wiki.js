* 用于显示图片，比如jpg、png、bin、sjpg等

## 快速开始
* 显示本地图片
![图片](../../image/ff8711ea-26df-448e-bad5-0557ef42b548.png)

```
# 当前APP的图片使用file:assets_ 路径
<div class="container">
    <img src="file:assets_images_player.png" align="center"></img>
</div>

# 另一个APP的图片或T卡的图片，使用data绑定数据 + 合并文件的写法
<div class="container">
    <img :src="imgPath" align="center"></img>
</div>

data: {
    imgPath:"",
},
onInit() {
    this.data.imgPath = "file:/lfs/microapp_settings.gupkg|assets_images_icon_default.png";
},
```

* 显示网络图片

```
<div class="container">
    <img src="http://www.baidu.com/content/person.jpg" align="center"></img>
</div>
```


## 常用属性
**只能定义在dom上**

| 属性名 | 描述 | 值类别 | 例子 |
| :----------------------- | :----------------------- | :----------------------- | :----------------------- |
| [src](#src) | 图片路径 | 字符串 |  |
| [offset_x](#offset) | 图片水平偏移，并平铺 | unit   | `<img offset_x="3" />` |
| [offset_y](#offset) | 图片纵向偏移，并平铺 | unit  | `<img offset_y="3" />` |
| [zoom](#zoom)  | 缩放图像，256=100%,512=200%  | int | `<img zoom="256" />` |
| [angle](#angle)  | 以图像中心点旋转，10 = 1°  | int | `<img angle="10" />` |
| [pivot](#pivot)   | 更改旋转中心点坐标(相对x=0,y=0)，默认为图片中心点 | unit | `<img pivot="3 8" />`  |
| [antialias](#antialias) | 是否抗锯齿(true/false) | bool | `<img antialias="true" />` |
| [size_mode](#size_mode) |  图像大小和对象大小不同时，缩放时的显示效果 | VIRTUAL/REAL | `<img size_mode="VIRTUAL" />` |
| cache | 图片是否要缓存到内存，默认true，这个属性必须写在第一个 | bool | `<img cache="true" />`  |
| disk_cache | 图片是否要缓存到文件系统，默认false | bool | `<img disk_cache="true" />` |
| disk_cache_bin | 是否转成BIN文件且缓存到文件系统，用于下载的图片需要快速刷新的场合，bin文件不需要解码 | bool | `<img disk_cache_bin="true" />` |
| zoom_width | 缩放到指定宽度 | 像素 | `<img zoom_width="50" />`  |
| is_load_mem | true文件内容加载到内存，false 将已经加载内存的图片数据卸载，主要目的是用于及时清空内存 | int |```<img is_load_mem="true" /> ``` |
| is_content_in_mem | 文件内容是否放在内存里，可以加快速度，但是消耗内存，如果是bin格式的文件，这个默认是true，如果是其他格式，例如png，jpg 小于1K默认为true，否则每次都从文件读取 | int |```<img is_content_in_mem="true" /> ``` |
| placeholder_src | http图片的占位图片 | string |```<img placeholder_src="file:/assets/images|load_icon.png" /> ``` |


### src
- 图片src属性支持三种格式：本地路径、网络路径、base64编码。
- 其他本地图片路径必须以file:开头
- 本地图片
```
<img src="file:assets_images_player.png" align="center"></img>
```

- 网络图片
    - 不推荐使用该方法，会造成设备端太多的http请求线程，但如果页面只是一个大文件，可以使用这种方式
    - 可通过img_http_status_changed事件了解网络图片下载状态（start，success，failed）

```
layout.xml
<img :src="imgPath" @img_http_status_changed="img_changed()"/>     

script.js
img_changed:function(status){
    console.log("image_changed status", status)
}
```

- base64编码
    - 服务器返回图片，建议使用data:base64格式，减少http请求，但建议每个文件小于30k

```
<img src=“data:image/png;base64,iVBORw0KGgoAAAA...SAAAAABJRU5ErkJggg==” />
```

### cache、disk_cache、disk_cache_bin
* 灵活使用缓存，可以减少内存占用，提升用户体验。
* cache：默认开启，缓存后会一直占用内存，内存紧张时建议仅主页logo和背景缓存，其他页面图片不缓存，APP就释放掉。
* disk_cache：将图片缓存到文件系统，常用于下载的图片，比如用户头像，无需每次下载。
* disk_cache_bin：将图片转成BIN缓存到文件系统，常用于下载的图片，且需要渲染速度快（比如滑动的错题本）的场景。

### is_load_mem
图片文件如果是bin文件，自动将该图片常驻在内存中，直到页面销毁时再清空该内存，
当一个页面加载了大量的大尺寸的bin文件时，例如首页有30个功能，每个功能的icon 30k，一共就需要900K
可以如果界面不显示时，可以使用is_load_mem = false 卸载这个图片的内存

### placeholder_src
* http图片占位符，下载图片的过程中，先显示一个“加载中”的图片，提升用户体验
* 该属性一定要放在src属性前面
* 该属性使用本地路径，不支持http路径

### offset
* 设置向x轴和y轴的偏移量，产生平铺效果
![图片](../../image/5265c623-8243-4e3e-80ba-9e6c59302e98.png)

```
<div class="container">
    <img src="file:assets_images_player.png" align="center" offset_x="20" offset_y="20"></img>
</div>
```

### pivot
* 图像的默认中心位于图片的几何中心，可通过pivot属性改变。
* pivot并不会影响图片的原始位置,只会与其他属性(zoom,angle)共同作用

### zoom
* 缩放图像，放大时中心点在左上角，缩小时的中心点为右下角，设置为256表示100%禁止缩放。大于256为放大，否则为缩小。
* 缩放比例基于256计算，如放大120%则为256*1.2=307，缩小50%，则为256*0.5=128

### angle    
* 图片旋转，旋转中心点位于图片几何中心，10表示1度，所以旋转90度则设置900。
* 可通过pivot属性设置旋转中心点，不设置则为图片几何重新，pivot（5,10）是相对左上角的坐标偏移量。

### antialias
* 转换质量进行调整。true时抗锯齿转换质量更高，但速度较慢。

### size_mode
* 设置图像大小模式:当图像大小和对象大小不同时，主要影响缩放时的显示效果
* VIRTUAL(默认值)： 缩放不会影响对象的坐标。
* REAL：如果对象大小设置为size_CONTENT，则对象大小等于缩放的图像大小。如果显式设置了对象大小，则放大时将裁剪图像。

## 常用样式
* 最佳实践：img不指定高宽，使用图片本身大小撑开父dom（父dom的高宽给auto）
* 当父容器大小 > 图片大小时，图片发生平铺，否则产生滚动条

## 常用事件
无