# 一、api以及参数
### API介绍
####  1、 player.createVideoPlayer(callback)
创建扫描的函数，并始终返回一个 videoPlayer对象
* callback: 回调函数，参数err，创建失败时触发

####  2、videoPlayer.play(url, option)
启动视频播放器播放
* url: 需要播放的视频url
* option: 对象，成员如下：
    * name: 视频名称
    * rate: 播放速度，默认为1X
    * win_size: 
      * x: 坐标
      * y: 坐标
      * width: 宽
      * height：高
      * scale_mode: 缩放模式, 可选

| scale_mode | value | 含义 |
| :---- | :---- | :---- |
| ORIGINAL_SIZE | 0 | 原始比例（原始大小）：将视频按照原始尺寸显示，不进行任何缩放，保持视频的原始宽高比, 不超过窗口大小 |
| FULL_SCREEN_TO_VIDEO_WINDOW | 1 | 适应窗口：将视频缩放以适应播放器窗口的大小，保持视频宽高比不变，可能会有黑边出现 |
| FULL_SCREEN_TO_SCREEN_SIZE | 2 | | 单元格 | 单元格 | 适应窗口：将视频缩放以适应播放器窗口的大小，保持视频宽高比不变，可能会有黑边出现 |
| 4R3MODE | 3 | 4:3：将视频按照4:3的宽高比缩放，适用于传统的4:3屏幕比例的设备 |
| 16R9MODE | 4 | 16:9：将视频按照16:9的宽高比缩放，适用于广屏显示器或具有16:9屏幕比例的设备|
| USER_DEFINED | 5 | 自定义：允许用户自定义缩放比例，可以手动调整视频窗口的大小，自定义宽高比等 |

####  3、videoPlayer.stop()
停止播放

####  4、videoPlayer.pause()
暂停播放

####  5、videoPlayer.resume(url)
恢复播放
* url: 需要恢复播放的视频url

####  6、videoPlayer.seek(offset)
设置位置播放的函数
* offset: 需要偏移的位置，参数为ms

####  7、videoPlayer.set_rate(rate)
设置播放的倍速
* rate: 播放速度

####  8、videoPlayer.set_win_szie(win_size)
设置播放视频的窗口大小，坐标基于原点， 宽高设置为0且缩放模式设置为自定义模式，则隐藏显示窗口
* win_size: 
  * x: 坐标
  * y: 坐标
  * width: 宽
  * height：高
  * scale_mode: 缩放模式

####  9、videoPlayer.destory()
销毁播放器，因视频播放器资源互斥，不支持同时创建多个播放器，如需调用player.createPlayer()创建新的播放器，要调用此接口先销毁播放器

### 事件
当创建成功后，返回的 videoplayer 对象可通过 on 方法监听多个事件，业务逻辑可在监听的回调函数中完成。以下列举一些常用的事件：
* start
##### 当开始播放时触发，参数为 options, options是一个obj
```
videoplayer.on('start', function(options) {
    console.debug('start');
});
```
下面列举支持的 Option对象中的属性值：
    * play_ofs: int 当前歌曲的偏移量（ms）
    * total_ofs: int 当前播放歌曲的总时长（ms）
    * stop_state: int 播放状态
        * 0: pause
        * 1: playing
        * 2: perparing
        * 3: perpared
        * 4: stoped
        * 5: resume
        * 6: init
        * 7: none
        * 8: completed
        * 9: error
    * rate：播放速度
    * url: string 歌曲播放路径
    * name: string 歌曲名字

* process
##### 播放过程触发，1秒一次，参数为 options, options是一个obj，描述见事件start
```
videoplayer.on('process', function(options) {
     console.debug('process');
});
```

* end
##### 播放停止触发，参数为 options, options是一个obj，描述见事件start
```
videoplayer.on('end', function(options) {
     console.debug('end');
});
```

* error
##### 播放失败触发，参数为 options, options是一个obj，描述见事件start
```
videoplayer.on('error', function(options) {
  console.debug('error');
});
```

### 例子
```
var player = require('video_player');

const audioUrl = "/mnt/card/rjbxxyw3njsc2018xdb01.mp4"

var option = {
    name: "abcdef",
    win_size: {
        x: 100,
        y: 0,
        width:360,
        height:170,
        scale_mode: 5,
    },
    rate: 1,
}

var videoPlayer = player.createVideoPlayer();

videoPlayer.on('error', function(options) {
  console.debug('player_error cb');
});

videoPlayer.on('start', function(options) {
    console.debug('player_start');
});

videoPlayer.on('process', function(options) {
    console.debug('player_process:', typeof(options), options);
});

videoPlayer.on('end', function(options) {
    console.debug('player_end');
});
videoPlayer.play(audioUrl, option);

var test1 = function() {
    function pause() {
        videoPlayer.pause();
    }
    setTimeout(pause, 1 * 10000);

    function resume() {
        videoPlayer.resume(audioUrl);
    }
    setTimeout(resume, 2 * 10000);

    function seek() {
        videoPlayer.seek(120 * 1000);
    }
    setTimeout(seek, 4 * 10000);

    function stop() {
        videoPlayer.stop();
    }
    setTimeout(stop, 6 * 10000);
}
test1();

```
