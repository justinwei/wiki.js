
| 模块 |描述 |函数名 |参数 |返回 |例子 |
|:-----|:----|:----|:----|:----|:----|
|gu_ui|jumpPage|页面跳转[*2](#jumppage)|1.destpage:目标页面名称 2.para:页面参数 json格式的字符串，参数如果包含"cache":false,表示该页面不进入缓存，用于不会频繁进入的页面 |无|``` gu_ui.jumpPage("koushuan","{\"grade\":\"1\"}") ```  |
|gu_ui|stopPageEvent|停止当前页面的JS事件响应|无 |无| |
|gu_ui|animInit|动画初始化|1.time 动画时长（毫秒）2.from：开始值 3.结束值  4.路径[*3](#anim_path)  4.function:回调函数  |无|```gu_ui.animInit(200, 0, 60, "linear", "anim_cb") ```  |
|gu_ui|animStart|启动动画,必须先调用anim_init|无 |无|``` gu_ui.animStart() ```  |
|gu_ui|animRepeatCount|动画重复次数|0xffff无数次 |无|``` gu_ui.animRepeatCount(0xffff) ```  |
|gu_ui|animRepeatDelay|两次动画延迟|毫秒 |无|``` gu_ui.animRepeatDelay(0) ```  |
|gu_ui|animChangeAttr|绑定dom的属性|1.domID 2.属性名称 |无|``` gu_ui.animChangeAttr("img_scroll", "offset_x") ```  |
|gu_ui|animReadyCallback|完成动画的回调|无 |无|```         gu_ui.animReadyCallback(function(){console.log("animReadyCallback.......")}) ```  |
|gu_ui|animStop|停止动画|无 |无|``` gu_ui.animStop() ```  |
|gu_ui|getCurPage|获取当前页面名称|无 |当前页面名称|```  var page = gu_ui.getCurPage() ```  |
|gu_ui|getSysLayer|获取syslayer对象，用于在浮动层创建对象|无 |sysdom对象|```  var button = gu_ui.createDom(getSysLayer(), 'botton') ```  |
|gu_ui|createDom|创建lvgl对象|1.父对象 2.对象类别 |dom对象指针|```  var button = gu_ui.createDom(parent, 'botton') ```  |
|gu_ui|createDomWithAttrAndStyle|动态创建dom对象，同时设置属性和样式|1.父对象 2.对象类别 3.属性和样式类别 |dom对象指针|```gu_ui.createDomWithAttrAndStyl(parent, 'botton',JSON.string(attr_style)))```  |
|gu_ui|delDom|删除lvgl对象 |dom对象指针|无|```  gu_ui.delDom(button)") ```  |
|gu_ui|setDomAttr|设置lvgl对象属性 |1.dom对象指针 2. 属性类别 3.属性值|无|```  gu_ui.setDomAttr(img, 'src', 'file:/backgrand.jpg')") ```  |
|gu_ui|getDomAttr|获取lvgl对象属性 |1.dom对象指针 2. 属性类别|无|```  gu_ui.getDomAttr(img, 'value')") ```  |
|gu_ui|setParentDom|设置dom的父Dom |1. 当前节点，2.父dom对象指针|无|```  gu_ui.setParentDom(img, div)") ```  |
|gu_ui|setDomStyle|设置lvgl对象的样式 |1.dom对象指针 2. 样式类别 3.属性值 4.sector|无|```  gu_ui.setDomStyle(button, 'align', 'center', 'FOCUSED|PART_ITEMS')") ```  |
|gu_ui|setDomEvent|设置dom的事件 |1.dom对象指针 2. 事件类别 3. 事件函数 4. 事件函数值 [*4](#js_event) |无|```          gu_ui.setDomEvent(btn, 'key', function(key_code){console.log("key_code=", key_code)}) ```  |
|gu_ui|addDomState|添加dom的state|dom对象，state值|无|```gu_ui.addDomState(text, 2)```  |
|gu_ui|clearDomState|清除加dom的state|dom对象，state值|无|```gu_ui.clearDomState(text, 2)```  |
|gu_ui|hasDomState|判断dom是否存在state|dom对象，state值|true/false|```console.log("has state", gu_ui.hasDomState(text, 2))```  |
|gu_ui|cleanAppImgCache|清除图片缓存，只用于设置了图片属性或样式 |路径|无|```  gu_ui.cleanAppImgCache('file:/assets/images/abc.jpg')") ```  |
|gu_ui|getDomById|根据dom的ID属性值获得dom指针 |id值|dom指针|```  var dom = gu_ui.getDomById('domid')") ```  |
|gu_ui|getLvObjById|根据dom的ID属性值获得lv指针 |id值|lv指针|```  var dom = gu_ui.getLvObjById('domid')") ```  |
|gu_ui|set_locale|设置APP的语言 |无|无|```  gu_ui.set_locale() ```  |
|gu_ui|get_locale|获取APP的语言|无|无|```  gu_ui.get_locale()```  |
|gu_ui|get_resource_value|获取APP的语言|无|无|```  gu_ui.get_resource_value('message.hello')```  |
|gu_ui|jumpApp|跳转到新的APP|1.app名称，2.参数|无|```  gu_ui.jumpApp('xmly', "para")```  |
|gu_ui|exitApp|退出当前APP, 会清除当前APP所有缓存，并清除当前页面|无|无|```  gu_ui.exitApp()```  |
|gu_ui|suspendApp|挂起当前APP，清除当前页面，但保留APP缓存|无|无|```  gu_ui.suspendApp()```  |
|gu_ui|activeApp|激活APP，和挂起APP对应|1. app名称|无|```  gu_ui.activeApp('launch')```  |
|gu_ui|loadFont|加载字库|1.字库名称，2.字库相对路径|无|```  gu_ui.loadFont(‘sim16’, '/xmly/sim16.bin')```  |
|gu_ui|unloadFont|卸载字库|1. 字库名称|无|```  gu_ui.unloadFont('sim16')```  |
|gu_ui|showMemMonitor|显示内存池使用情况 |无|无|```  gu_ui.showMemMonitor() ```  |
|gu_ui|hideMemMonitor|隐藏内存池使用情况|无|无|```  gu_ui.hideMemMonitor()```  |
|gu_ui|getCurrentOS|获取当前运行的OS|无|macos， rtos，windows，linux|```  gu_ui.getCurrentOS()```  |
|gu_ui|unzipFile|xz文件解压|压缩文件，解压文件|0正确，-1异常|```gu_ui.unzipFile("./fatfs/debug_xz.ttf.xz", "./fatfs/debug_xz11.ttf")```  |
|gu_ui|CachePageData|缓存当前页面到缓存文件里|参数为key值，如果key为空，系统自动将页面的参数作为key值||```gu_ui.CachePageData("key")```  |
|gu_ui|setPageCachePath|设置页面缓存的路径|参数路径||```gu_ui.setPageCachePath("/lfs/page_cache")```  |
|gu_ui|setImgCachePath|设置图片缓存的路径|参数路径||```gu_ui.setImgCachePath("/lfs/img_cache")```  |
|gu_ui|setImgCacheSize|设置图片缓存的大小，默认400k|参数路径||```gu_ui.setImgCacheSize(1000*1024)```  |
|gu_ui|setPageCachePath|设置页面缓存的路径|参数路径||```gu_ui.setPageCachePath("/lfs/page_cache")```  |
|gu_ui|setKVOption|设置kv的option|||```gu_ui.setKVOption(JSON.string({path:'', name:'', mode:1}))```  |
|gu_ui|setEventDuration|设置事件防抖事件间隔|默认是300ms||```gu_ui.setEventDuration(500))```  |
|gu_ui|setScrollEventDelay|设置scroll_end延迟响应时间，默认是0| ||```gu_ui.setScrollEventDelay(500))```  |
|gu_ui|createLayout|创建一个dom树|1.父dom到指针，2.dom树的layout|返回创建dom树根结点的指针|```gu_ui.createLayout(null, JSON.stringify(this.data.layout)```  |
|gu_ui|setImgMaxRequestNum|设置图片最大的下载线程，默认是5个|线程数||```gu_ui.setImgMaxRequestNum(1)```  |





<p id="jumppage"></p>  
*2. 页面跳转和 script默认的onload的关系
```  
....前一页的 script.js
gu_ui.jumppage("koushuan", JSON.stringify({
                grade:"1"}))

....新页的 script.js

koushuan = {
    onload:function(para){
        json = JSON.parse(para)
        console.log("grade=", json.grade)
    }
}

```  
jumpAPP 参数列表
| 参数名称 |描述 |例子 |
|:-----|:----|:----|
| max_cache_page_count | | |
| max_cache_image_count | | |
| is_launch_app |是否为lauchAPP，1. 启动JS放在使用消息队列 2.加载页面时，完成全部渲染后，才显示，否则一边渲染一边显示 | |
| load_js_type |有2个值，0:JS_ENG 在C语言的引擎不调用add_watch, onload, delete 等JS代码，这些代码由JS引擎完成 2. 根据传入页面参数决定是否加载页面JS  1:在C语言的引擎加载JS代码，包括 add_watch, onload, delete | |

jumppage 参数列表
| 参数名称 |参数类别 |例子 |
|:-----|:----|:----|
| cache | bool|该页面是否缓存,15版本已经强制为不缓存，不需要设置该属性|
| upd_data_list | JSON 数组|加载页面前需要更新的数据| 
| updateData |JSON|加载页面前，不使用默认的data数据，熏染页面时使用该参数的data | 
| cache_data |bool或string|是否从缓存文件里读页面数据，如果参数是string，从保存到key值| 
| is_last_page_data |bool|是否使用页面上一次的数据缓存，改参数用于返回上一页不用重现刷数据 | 
| hasJSCache |bool|是否已经JS缓存，如果已经JS缓存，加载页面时，不加载JS代码 | |
```  
gu_ui.jumppage("koushuan", JSON.stringify({
                cache:false}))
```

加载页面前更改页面某些数据::  

```  
gu_ui.jumppage("koushuan", JSON.stringify({
                cache:false, upd_data_list:[{"button_str":"are you ok?"}]}))
```

加载页面前更改页面整个页面的数据::  

```  
gu_ui.jumppage("koushuan", JSON.stringify({
                updateData:[{"button_str":"are you ok?"}]}))
```


*3.动画路径

| 属性值 | 描述 | lv对应值 |
|:-----|:----:|:----|
|linear |  |lv_anim_path_linear|
|step |  |lv_anim_path_step|
|ease_in |  |lv_anim_path_ease_in|
|ease_out |  |lv_anim_path_ease_out|
|ease_in_out |  |lv_anim_path_ease_in_out|
|overshoot |  |lv_anim_path_overshoot|
|bounce |  |lv_anim_path_bounce|

*4. DOM事件处理

setDomEvent方法，后面可以更可变长的参数作为事件函数的实际参数
如果是key事件，key_code会自动加在最后一个参数
```
        gu_ui.setDomEvent(btn, "click", function(str, ind){
            console.log("str=", str, "ind=", ind)
        }, "hello wold", 5)
        打印：str=hello world ind=5

        gu_ui.setDomEvent(btn, 'key', function(key_code){
            console.log("key_code=", key_code)
        })

       
```
*5. 动画绑定dom属性
```
  gu_ui.animInit(1000, 0, 480, "", "")  // 480是图片的宽度
        gu_ui.animChangeAttr("img_scroll", "offset_x") //img_scroll是图片的ID
        gu_ui.animRepeatCount(0xffff)
        gu_ui.animRepeatDelay(0)
        gu_ui.animStart()
```
*6. 动态创建dom对象时，同时设置属性和样式
```
        attr_style = {
            attr:[
                {width:"100"},
                {height:"100"},
                {x:"20"},
                {y:"20"},
                {text:"hello"},
            ],
            style:[
                {color:"#ff0000"},
                {bg_color:"#ff0000"}, 
            ]
        }
        var dom = gu_ui.createDomWithAttrAndStyle(null, "label", JSON.stringify(attr_style))
```

*7. 动态创建dom树时，同时设置属性和样式
```
       var layout = {
            tag:"div",
            attr:{
                width:"200", 
                height:"100"
            },
            style:{
                bg_color:"#f0f0f0",
            },
            children:[
                {
                    tag:"button",
                    attr:{
                        width:"100", 
                        height:"50"
                    },
                    style:{
                        bg_color:"#ff0000",
                    },
                }
            ]
       },
        var dom = gu_ui.createLayout(null, JSON.stringify(layout)) 
```

